
r'''

e script/xstt5_com__extract_book_title_from_txt__reverse_rename.py
py /sdcard/0my_files/git_repos/txt_phone/txt/script/xstt5_com__extract_book_title_from_txt__reverse_rename.py
#'''



import io
import ast
from pathlib import Path
def rename_file(*, from_fname, to_fname):
    if type(from_fname) is not Path:
        from_fname = Path(from_fname)
    if type(to_fname) is not Path:
        to_fname = Path(to_fname)

    if not from_fname.exists():
        raise FileNotFoundError(from_fname)
    elif to_fname.exists():
        if to_fname.samefile(from_fname):
            #do nothing
            pass
        else:
            raise FileExistsError(to_fname)
    else:
        from_fname.rename(to_fname)
    return


def mk_fin():
    s = r'''
('小说天堂txt-4/100461435680799.txt','《再生缘》')
('小说天堂txt-4/100491435680806.txt','《王安石传》')
('小说天堂txt-4/100581435680840.txt','《禅真后史》')
('小说天堂txt-4/100611435680849.txt','《小八义》')
('小说天堂txt-4/100631435680849.txt','《二度梅全传》')
('小说天堂txt-4/100701435680852.txt','《廿载繁华梦》')
('小说天堂txt-4/100711435680852.txt','《醒名花》')
('小说天堂txt-4/100761435680853.txt','《通书》')
('小说天堂txt-4/100901435830721.txt','《痴婆子传》')
('小说天堂txt-4/100911435830721.txt','《醋葫芦》')
('小说天堂txt-4/100961435830723.txt','《貂蝉艳史演义》')
('小说天堂txt-4/100991435830724.txt','《万花楼》')
('小说天堂txt-4/101011435830724.txt','《酉阳杂俎》')
('小说天堂txt-4/101081435830726.txt','《新石头记》')
('小说天堂txt-4/101111435830727.txt','《银瓶梅》')
('小说天堂txt-4/102141436196129.txt','《玉蟾记》')
('小说天堂txt-4/102221436196132.txt','《大明奇侠传》')
('小说天堂txt-4/102231436196132.txt','《大汉三合明珠宝剑全传》')
('小说天堂txt-4/102271436196133.txt','《西游补》')
('小说天堂txt-4/102291436196133.txt','《幽冥录》')
('小说天堂txt-4/102331436196135.txt','《二十四尊得道罗汉传》')
('小说天堂txt-4/102341436196135.txt','《跻云楼》')
('小说天堂txt-4/102351436196137.txt','《绣云阁》')
('小说天堂txt-4/102391436284167.txt','《五代残唐》')
('小说天堂txt-4/102441436284175.txt','《醒梦骈言》')
('小说天堂txt-4/102461436284176.txt','《续夷坚志》')
('小说天堂txt-4/102571436284194.txt','《春梦琐言》')
('小说天堂txt-4/102591436284196.txt','《昭阳趣史》')
('小说天堂txt-4/102611436284197.txt','《绣榻野史》')
('小说天堂txt-4/102621436284197.txt','《春灯迷史》')
('小说天堂txt-4/102631436284198.txt','《桃花影》')
('小说天堂txt-4/102641436284200.txt','《五凤吟》')
('小说天堂txt-4/102671436284210.txt','《野叟曝言》')
('小说天堂txt-4/102701436284221.txt','《朝野佥载》')
('小说天堂txt-4/102751436284230.txt','《夜雨秋灯录》')
('小说天堂txt-4/102811436284261.txt','《钟馗平鬼传》')
('小说天堂txt-4/110301437493296.txt','《五美缘》')
('小说天堂txt-4/110311437493299.txt','《大清三杰》')
('小说天堂txt-4/110351437493343.txt','《五虎征西》')
('小说天堂txt-4/110381437493370.txt','《武宗逸史》')
('小说天堂txt-4/110411437493399.txt','《唐宋传奇选》')
('小说天堂txt-4/110471437493448.txt','《续子不语》')
('小说天堂txt-4/110481437493450.txt','《西施艳史演义》')
('小说天堂txt-4/110501437493473.txt','《二度梅》')
('小说天堂txt-4/110511437493477.txt','《无耻奴》')
('小说天堂txt-4/110531437493488.txt','《益智录》')
('小说天堂txt-4/110551437493515.txt','《杜骗新书》')
('小说天堂txt-4/110561437493519.txt','《永庆升平前传》')
('小说天堂txt-4/114371438308225.txt','《瞎骗奇闻》')
('小说天堂txt-4/137411442286345.txt','《五色石》')
('小说天堂txt-4/137471442286346.txt','《雍正剑侠传》')
('小说天堂txt-4/137481442286346.txt','《续三国演义》')
('小说天堂txt-4/137521442286348.txt','《杨家将演义》')
('小说天堂txt-4/137531442286348.txt','《瓦岗英雄》')
('小说天堂txt-4/137541442286348.txt','《大宋中兴通俗演义》')
('小说天堂txt-4/137561442286350.txt','《薛丁山征西》')
('小说天堂txt-4/137611442286353.txt','《艺文类聚》')
('小说天堂txt-4/137631442286353.txt','《册府元龟》')
('小说天堂txt-4/137641442286354.txt','《太平御览》')
('小说天堂txt-4/137681442286357.txt','《唐太宗与李靖问对》')
('小说天堂txt-4/137741442286359.txt','《太乙金华宗旨》')
('小说天堂txt-4/137851442286367.txt','《唐摭言》')
('小说天堂txt-4/137941442286370.txt','《物犹如此》')
('小说天堂txt-4/137971442286372.txt','《王守仁全集》')
('小说天堂txt-4/137981442286372.txt','《铜人针灸经》')
('小说天堂txt-4/139761442679898.txt','《尴尬大全》')
('小说天堂txt-4/142781443287633.txt','《全透视简明中国通史》')
('小说天堂txt-4/143521443703342.txt','《中国周边安全形势概览（2012~2013）》')
('小说天堂txt-4/144081444060584.txt','《婚恋要读心理学大全集》')
('小说天堂txt-4/144291444149878.txt','《唐诗宋词元曲大全集（超值金版）》')
('小说天堂txt-4/144431444149881.txt','《南京大屠杀全纪实》')
('小说天堂txt-4/144471444319143.txt','《一生必读的随笔美文大全集（超值金版）》')
('小说天堂txt-4/144481444319143.txt','《最美丽的古典诗词大全集》')
('小说天堂txt-4/144511444319143.txt','《一生要读的美丽唐诗》')
('小说天堂txt-4/144541444319145.txt','《中华美德歌谣全集》')
('小说天堂txt-4/144661444319148.txt','《一生要读的美丽宋词》')
('小说天堂txt-4/144701444319148.txt','《中华成语故事大全集（超值金版）》')
('小说天堂txt-4/144891444607448.txt','《唐语林》')
('小说天堂txt-4/145101444607454.txt','《东坡志林》')
('小说天堂txt-4/149021461661973.txt','《杜阳杂编》')
('小说天堂txt-4/149061461661974.txt','《幽明錄》')
('小说天堂txt-4/149071461661976.txt','《异苑》')
('小说天堂txt-4/149151461661978.txt','《云仙杂记》')
('小说天堂txt-4/149221461661983.txt','《云溪友议》')
('小说天堂txt-4/149231461661984.txt','《玉壶野史》')
('小说天堂txt-4/149241461661984.txt','《湘山野录》')
('小说天堂txt-4/149261461661985.txt','《中朝故事》')
('小说天堂txt-4/19091404728372.txt','《脂砚斋重评石头记》')
('小说天堂txt-4/19101404728376.txt','《增补红楼梦》')
('小说天堂txt-4/19111404728377.txt','《续红楼梦》')
('小说天堂txt-4/196961621782556.txt','《于少保萃忠全传》')
('小说天堂txt-4/196981621782557.txt','《铁冠图忠烈全传》')
('小说天堂txt-4/197221621782566.txt','《唐钟馗平鬼传》')
('小说天堂txt-4/197421621868967.txt','《全上古三代文、全秦文》')
('小说天堂txt-4/197671622128203.txt','《六祖坛经全文》')
('小说天堂txt-4/197891622128212.txt','《说唐全传（合集）》')
('小说天堂txt-4/197941622301026.txt','《中医方剂大全》')
('小说天堂txt-4/198081622301034.txt','《唐人传奇小说集：河东记》')
('小说天堂txt-4/198291622301049.txt','《台湾通史》')
('小说天堂txt-4/198331622301051.txt','《兴唐传（又名：兴唐全传）》')
('小说天堂txt-4/198511622473845.txt','《铁冠图全传》')
('小说天堂txt-4/198551622473850.txt','《唐书志传》')
('小说天堂txt-4/199741622819511.txt','《耳新》')
('小说天堂txt-4/21221405435348.txt','《比目鱼》')
('小说天堂txt-4/23091405875244.txt','《围炉夜话》')
('小说天堂txt-4/26641406890922.txt','《易经·系辞》')
('小说天堂txt-4/26941408294900.txt','《陶庵梦忆》')
('小说天堂txt-4/27751408471654.txt','《文心雕龙》')
('小说天堂txt-4/29221408901293.txt','《曹操诗全集》')
('小说天堂txt-4/29261408901301.txt','《杜甫诗全集》')
('小说天堂txt-4/29291408984105.txt','《崔颢诗全集》')
('小说天堂txt-4/29311408984105.txt','《杜审言诗全集》')
('小说天堂txt-4/29341408984107.txt','《王维诗选》')
('小说天堂txt-4/29351408984107.txt','《薛涛诗》')
('小说天堂txt-4/29361408984107.txt','《岑参诗选》')
('小说天堂txt-4/29371408984108.txt','《崔护诗选》')
('小说天堂txt-4/29391408984108.txt','《韦应物诗选》')
('小说天堂txt-4/30591409481579.txt','《子不语》')
('小说天堂txt-4/30761409481590.txt','《桃花扇》')
('小说天堂txt-4/31201409678310.txt','《王阳明全集之一（知行录）》')
('小说天堂txt-4/31211409678312.txt','《王阳明全集之二（静心录）》')
('小说天堂txt-4/31221409678313.txt','《王阳明全集之三（悟真录）》')
('小说天堂txt-4/31231409678313.txt','《王阳明全集之四（顺生录）》')
('小说天堂txt-4/31491409766921.txt','《相忘于江湖》')
('小说天堂txt-4/32241410506893.txt','《资治通鉴全译》')
('小说天堂txt-4/32261410506904.txt','《中庸》')
('小说天堂txt-4/32471410761028.txt','《周易参同契》')
('小说天堂txt-4/32491410761029.txt','《战国策》')
('小说天堂txt-4/32641410761053.txt','《仪礼译注》')
('小说天堂txt-4/32691410761061.txt','《荀子译注》')
('小说天堂txt-4/32701410761063.txt','《战国策译析》')
('小说天堂txt-4/33621411316565.txt','《大唐西域记》')
('小说天堂txt-4/33701411316576.txt','《太平广记》')
('小说天堂txt-4/34431411661832.txt','《王阳明全集》')
('小说天堂txt-4/34631411841981.txt','《东京梦华录》')
('小说天堂txt-4/35291412002511.txt','《阅微草堂笔记》')
('小说天堂txt-4/36771412921787.txt','《小五义》')
('小说天堂txt-4/36781412921788.txt','《续小五义》')
('小说天堂txt-4/45341414951179.txt','《杨家将》')
('小说天堂txt-4/45351414951179.txt','《洗冤集录》')
('小说天堂txt-4/45371414951182.txt','《五美缘全传》')
('小说天堂txt-4/45421414951185.txt','《荡寇志》')
('小说天堂txt-4/45461414951189.txt','《吴江雪》')
('小说天堂txt-4/45471414951189.txt','《听月楼》')
('小说天堂txt-4/45531414951192.txt','《百花野史》')
('小说天堂txt-4/45541414951192.txt','《玉娇梨》')
('小说天堂txt-4/45581414951194.txt','《雪月梅》')
('小说天堂txt-4/45601414951195.txt','《续金瓶梅》')
('小说天堂txt-4/45701415117226.txt','《智囊全集》')
('小说天堂txt-4/45731415117228.txt','《大明正德皇游江南传》')
('小说天堂txt-4/45791415117232.txt','《型世言》')
('小说天堂txt-4/45851415117237.txt','《春阿氏谋夫案》')
('小说天堂txt-4/45881415117238.txt','《醒世姻缘传》')
('小说天堂txt-4/45941415117244.txt','《元代野史》')
('小说天堂txt-4/45971415117248.txt','《薛刚反唐》')
('小说天堂txt-4/45991415117249.txt','《第一美女传》')
('小说天堂txt-4/46011415117252.txt','《玉梨魂》')
('小说天堂txt-4/65641425461196.txt','《三十六计》')
('小说天堂txt-4/6581408086619.txt','《贞观政要》')
('小说天堂txt-4/70751427274393.txt','《最让中国人怀念的古典爱情小说》')
('小说天堂txt-4/71721428053187.txt','《笠翁对韵》')
('小说天堂txt-4/75181429087162.txt','《仪礼》')
('小说天堂txt-4/75321429168552.txt','《荀子》')
('小说天堂txt-4/75411429168555.txt','《维摩诘所说经》')
('小说天堂txt-4/75421429168555.txt','《地藏菩萨本愿经》')
('小说天堂txt-4/75441429168556.txt','《颜氏家训》')
('小说天堂txt-4/75451429168556.txt','《诸葛亮兵法》')
('小说天堂txt-4/75471429168556.txt','《贤愚经》')
('小说天堂txt-4/75511429168558.txt','《新五代史》')
('小说天堂txt-4/75531429168558.txt','《逸周书》')
('小说天堂txt-4/75541429168559.txt','《阴符经》')
('小说天堂txt-4/75571429168559.txt','《尉缭子》')
('小说天堂txt-4/75591429168560.txt','《吴子兵法》')
('小说天堂txt-4/75601429168560.txt','《易传》')
('小说天堂txt-4/75611429168560.txt','《止学》')
('小说天堂txt-4/8771408087155.txt','《周易全解》')
('小说天堂txt-4/8951408087247.txt','《醒世恒言》')
('小说天堂txt-4/8961408087250.txt','《喻世明言》')
('小说天堂txt-4/9021408087264.txt','《西厢记》')
('小说天堂txt-4/98331435046567.txt','《幼学琼林》')
('小说天堂txt-4/98371435046578.txt','《万花楼(狄青初传)》')
('小说天堂txt-4/98381435046588.txt','《游仙窟》')
('小说天堂txt-4/98401435046593.txt','《太上感应篇》')
('小说天堂txt-4/98421435046595.txt','《五虎征西(狄青前传)》')
('小说天堂txt-4/98571435046600.txt','《新唐书》')
('小说天堂txt-4/98641435046601.txt','《英烈传》')
('小说天堂txt-4/98661435046603.txt','《唐李问对》')
('小说天堂txt-4/98681435046603.txt','《陶渊明集》')
('小说天堂txt-4/98691435046603.txt','《五虎平南》')
('小说天堂txt-4/98821435163405.txt','《帝范》')
('小说天堂txt-4/98841435163412.txt','《袁氏世范》')
('小说天堂txt-4/98901435163459.txt','《唐才子传》')
('小说天堂txt-4/98911435163463.txt','《元曲三百首》')
('小说天堂txt-4/99151435163509.txt','《文史通义》')
#'''
    s = s[1:-1]
    fin = io.StringIO(s)
    return fin

def iter_rpath_title_pairs__ifile(fin):
    for line in fin:
        rpath, book_title = ast.literal_eval(line)
        yield rpath, book_title

def reverse_rename(root_dir, rpath_title_pairs):
    root_dir = Path(root_dir)
    for rpath, book_title in rpath_title_pairs:
        old_fname = root_dir / rpath
        new_fname = old_fname.parent / f'{book_title}.txt'
        #print(new_fname)
        rename_file(from_fname=new_fname, to_fname=old_fname)



if __name__ == "__main__":
    root_dir = r'/sdcard/Download/txt/小说天堂txt/'
    rpath_title_pairs = iter_rpath_title_pairs__ifile(mk_fin())
    reverse_rename(root_dir, rpath_title_pairs)




